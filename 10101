<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Test</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            padding: 20px;
            background: #f4f4f9;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 15px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
            background: #333;
            color: white;
            font-size: 14px;
        }

        button:hover {
            background: #555;
        }

        button.reset {
            background: #d9534f;
        }

        .heavy-container {
            width: 100%;
            min-height: 400px;
            background: white;
            padding: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .heavy-item {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            position: relative;
            border-radius: 4px;
        }

        .heavy-item::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 2px dashed rgba(255,255,255,0.5);
            border-radius: 50%;
            animation: spin 3s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hide-display {
            display: none !important;
        }

        .hide-visibility {
            visibility: hidden !important;
        }

        .hide-opacity {
            opacity: 0 !important;
        }

        .hide-transform {
            transform: scale(0) !important;
        }
    </style>
</head>
<body>

    <div class="controls">
        <button id="btnDisplay">Режим 1: display: none</button>
        <button id="btnVisibility">Режим 2: visibility: hidden</button>
        <button id="btnOpacity">Режим 3: opacity: 0</button>
        <button id="btnTransform">Режим 4: transform: scale(0)</button>
        <button id="btnReset" class="reset">Сброс</button>
    </div>

    <div id="container" class="heavy-container"></div>

    <script>
        const container = document.getElementById('container');
        const fragment = document.createDocumentFragment();

        for (let i = 0; i < 50; i++) {
            const div = document.createElement('div');
            div.className = 'heavy-item';
            fragment.appendChild(div);
        }
        container.appendChild(fragment);

        function applyMode(className, modeName) {
            requestAnimationFrame(() => {
                const start = performance.now();
                
                container.classList.add(className);
                
                requestAnimationFrame(() => {
                    const end = performance.now();
                    console.log(`Метод: ${modeName} | Время: ${(end - start).toFixed(4)} ms`);
                });
            });
        }

        document.getElementById('btnDisplay').addEventListener('click', () => applyMode('hide-display', 'display: none'));
        document.getElementById('btnVisibility').addEventListener('click', () => applyMode('hide-visibility', 'visibility: hidden'));
        document.getElementById('btnOpacity').addEventListener('click', () => applyMode('hide-opacity', 'opacity: 0'));
        document.getElementById('btnTransform').addEventListener('click', () => applyMode('hide-transform', 'transform: scale(0)'));

        document.getElementById('btnReset').addEventListener('click', () => {
            container.className = 'heavy-container';
        });
    </script>
</body>

</html>
